(()=>{var e={};e.id=338,e.ids=[338],e.modules={440:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s(1658);let a=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,r.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1179:(e,t,s)=>{Promise.resolve().then(s.bind(s,7684))},1573:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>m,pages:()=>c,routeModule:()=>u,tree:()=>d});var r=s(5239),a=s(8088),n=s(8170),i=s.n(n),o=s(893),l={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);s.d(t,l);let d={children:["",{children:["breakdown",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,7684)),"D:\\Projects\\MailCraft\\mailcraft\\src\\app\\breakdown\\page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,4431)),"D:\\Projects\\MailCraft\\mailcraft\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,7398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,9999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,5284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["D:\\Projects\\MailCraft\\mailcraft\\src\\app\\breakdown\\page.tsx"],m={require:s,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/breakdown/page",pathname:"/breakdown",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},2341:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>f});var r=s(687),a=s(3210),n=s(7605),i=s(9523),o=s(4729),l=s(4493),d=s(9667),c=s(2688);let m=(0,c.A)("ClipboardCheck",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]]),u=(0,c.A)("Clipboard",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]]);var p=s(5814),h=s.n(p),x=s(1342);function f(){let[e,t]=(0,a.useState)(!1),[s,c]=(0,a.useState)(""),[p,f]=(0,a.useState)(!1),[g,w]=(0,a.useState)("Professional"),[y,b]=(0,a.useState)([]),[j,v]=(0,a.useState)(""),N=(e,t)=>{let s=[...y];s[e].replacement=t,b(s)},{register:C,handleSubmit:k,watch:E,control:I,reset:T,setValue:q}=(0,n.mN)({defaultValues:{emailContent:"",questionItems:[]}}),{fields:P,replace:S}=(0,n.jz)({control:I,name:"questionItems"}),O=async e=>{t(!0);try{let t=await fetch("/api/openai",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:`Analyze this email and extract EXACTLY the questions and key points that need to be addressed in a reply:

${e.emailContent}

For each question or key point, use the EXACT text from the email in this format:
[QUESTION]: (Copy the EXACT text of questions or key points from the email)
[TYPE]: (TEXT, CHOICES, DATE, TIME, or NUMBER)
[OPTIONS]: (For CHOICES only, provide 4-6 creative, diverse options that represent different approaches to responding)
[END]

IMPORTANT: 
1. Use the EXACT wording from the email for each question or point - do not rephrase or summarize
2. If there's a direct question in the email like "When can we meet?" use that exact text as the [QUESTION]
3. For statements that need a response but aren't questions, use the exact text from the email
4. Always include options for CHOICES type questions

Examples:
If the email says: "When can we meet to discuss the project?"
Use: [QUESTION]: When can we meet to discuss the project?

If the email says: "I need your feedback on the budget proposal."
Use: [QUESTION]: I need your feedback on the budget proposal.

If the email says: "Please let me know if you're available next week."
Use: [QUESTION]: Please let me know if you're available next week.`,type:"breakdown"})});if(!t.ok)throw Error("Failed to breakdown email");let s=(await t.json()).content;if(!s.includes("[QUESTION]:")){let e=$(s);S(e);return}let r=s.split("[QUESTION]:").slice(1).map(e=>{let t=e.includes("[END]")?e:e+"[END]",s=t.length;for(let e of["[TYPE]:","[OPTIONS]:","[DEFAULT]:","[END]"]){let r=t.indexOf(e);-1!==r&&r<s&&(s=r)}let r=t.substring(0,s).trim(),a="TEXT";if(t.includes("[TYPE]:")){let e=t.indexOf("[TYPE]:")+7,s=t.length;for(let r of["[OPTIONS]:","[DEFAULT]:","[END]"]){let a=t.indexOf(r,e);-1!==a&&a<s&&(s=a)}a=t.substring(e,s).trim().toUpperCase()}let n=[];if("CHOICES"===a&&t.includes("[OPTIONS]:")){let e=t.indexOf("[OPTIONS]:")+10,s=t.length;for(let r of["[DEFAULT]:","[END]"]){let a=t.indexOf(r,e);-1!==a&&a<s&&(s=a)}let r=t.substring(e,s).trim(),a=r.split(",").map(e=>e.trim()).filter(Boolean);a.length<=1&&(r.includes("- ")||r.includes("• "))&&(a=r.split(/\n\s*[-•]\s+/).map(e=>e.trim()).filter(Boolean)),a.length<=1&&r.includes("\n")&&(a=r.split("\n").map(e=>e.trim()).filter(Boolean)),n=a.map(e=>{let t=e.replace(/^["']|["']$/g,"");return t=t.replace(/^(\d+\.|\w+\s*\d+:)\s+/i,"")}),0===n.length&&(n=["Yes","No","Maybe","Need more information"]),n.length>8&&(n=n.slice(0,8))}else"CHOICES"===a&&(n=["Yes","No","Maybe","Need more information"]);let i="";if(t.includes("[DEFAULT]:")){let e=t.indexOf("[DEFAULT]:")+10,s=t.length;for(let r of["[END]"]){let a=t.indexOf(r,e);-1!==a&&a<s&&(s=a)}i=t.substring(e,s).trim()}return{question:r||"How should I respond to this point?",type:a,options:n,default:i}}).filter(e=>""!==e.question.trim());if(0===r.length){let e=$(s);S(e);return}let a=r.map((e,t)=>({id:`q-${t}`,question:e.question,answer:e.default||"",type:e.type,options:e.options||[]})),n=D(a);S(n)}catch(e){console.error("Error:",e),S(A()),alert("There was an issue analyzing the email, but we've generated some basic questions to help you respond.")}finally{t(!1)}},$=e=>{let t=e.split(/[.!?]\s+/).filter(e=>e.includes("?")||e.toLowerCase().includes("how")||e.toLowerCase().includes("what")||e.toLowerCase().includes("when")).map(e=>e.trim()).filter(e=>e.length>10);return t.length>=3?t.slice(0,5).map((e,t)=>({id:`q-${t}`,question:e.endsWith("?")?e:`${e}?`,answer:"",type:"TEXT",options:[]})):A()},A=()=>[{id:"q-0",question:"What are the main points I should address in my reply?",answer:"",type:"TEXT",options:[]},{id:"q-1",question:"What tone should I use in my response?",answer:"",type:"CHOICES",options:["Professional","Friendly","Formal","Casual","Direct"]},{id:"q-2",question:"Is there any specific action I need to take?",answer:"",type:"CHOICES",options:["Yes, immediate action required","Schedule follow-up","Provide more information","No action needed"]},{id:"q-3",question:"When should I respond by?",answer:"",type:"DATE",options:[]}],D=e=>e.map(e=>("CHOICES"!==e.type||e.options&&0!==e.options.length||(e.question.toLowerCase().includes("tone")?e.options=["Professional","Friendly","Formal","Casual","Direct"]:e.question.toLowerCase().includes("action")||e.question.toLowerCase().includes("do")?e.options=["Yes, immediate action required","Schedule follow-up","Provide more information","No action needed"]:e.question.toLowerCase().includes("agree")||e.question.toLowerCase().includes("accept")?e.options=["Fully agree","Agree with conditions","Partially agree","Need more information","Disagree"]:e.options=["Yes","No","Maybe","Need more information"]),e)),L=async e=>{t(!0),c("loading");try{let t=e.questionItems.map(e=>`${e.question}: ${e.answer}`).join("\n"),s={name:localStorage.getItem("userProfile")?JSON.parse(localStorage.getItem("userProfile")).name:"User",email:localStorage.getItem("userProfile")?JSON.parse(localStorage.getItem("userProfile")).email:"user@example.com"},r=`Generate a well-structured reply to an email based on the following information:
      
ORIGINAL EMAIL: ${e.emailContent}

KEY POINTS TO ADDRESS:
${t}

TONE: ${g}

SENDER INFO:
Name: ${s.name}
Email: ${s.email}

Create a ${g.toLowerCase()} email reply with appropriate greeting, body, and sign-off.`,a=await fetch("/api/openai",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:r,type:"generate"})});if(!a.ok)throw Error("Failed to generate reply");let n=await a.json();c(n.content)}catch(e){console.error("Error:",e),alert("Failed to generate reply. Please try again."),c("")}finally{t(!1)}};return(0,r.jsxs)("div",{className:"container mx-auto py-8 flex flex-col min-h-[calc(100vh-14rem)] justify-center",children:[!P.length&&!s&&(0,r.jsxs)("div",{className:"max-w-2xl w-full mx-auto",children:[(0,r.jsxs)("div",{className:"relative mb-4",children:[(0,r.jsx)(h(),{href:"/",className:"text-gray-600 hover:text-blue-600 dark:text-gray-300 dark:hover:text-blue-400 absolute left-0 top-1/2 -translate-y-1/2",children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})}),(0,r.jsx)("h1",{className:"text-3xl font-bold text-center",children:"Breakdown & Reply to an Email"})]}),(0,r.jsx)(l.Zp,{className:"w-full",children:(0,r.jsx)(l.Wu,{className:"p-4",children:(0,r.jsxs)("form",{onSubmit:k(O),children:[(0,r.jsx)(o.T,{placeholder:"Paste the email you received here. We'll break it down into key points for you to address.",className:"min-h-32 w-full resize-none",...C("emailContent")}),(0,r.jsx)("div",{className:"flex justify-center mt-4",children:(0,r.jsx)(i.$,{type:"submit",className:"w-1/3",disabled:e||!E("emailContent"),children:e?"Breaking down...":"Breakdown Email"})})]})})})]}),P.length>0&&!s&&(0,r.jsx)("div",{className:"max-w-4xl w-full mx-auto",children:(0,r.jsxs)(l.Zp,{className:"w-full",children:[(0,r.jsxs)(l.aR,{className:"text-center",children:[(0,r.jsx)(l.ZB,{children:"Address these points in your reply"}),(0,r.jsx)(l.BT,{children:"Answer each question or point to generate a comprehensive reply"})]}),(0,r.jsx)(l.Wu,{children:(0,r.jsxs)("form",{onSubmit:k(L),children:[P.map((e,t)=>(0,r.jsxs)("div",{className:"mb-6 w-full",children:[(0,r.jsxs)("label",{className:"block text-sm font-medium mb-2",children:[t+1,". ",e.question]}),"CHOICES"===e.type&&e.options&&e.options.length>0?(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("div",{className:"flex flex-wrap gap-2 mb-2",children:e.options.map((e,s)=>(0,r.jsx)(i.$,{type:"button",variant:E(`questionItems.${t}.answer`)===e?"default":"outline",size:"sm",onClick:()=>q(`questionItems.${t}.answer`,e),className:`mr-2 mb-1 ${E(`questionItems.${t}.answer`)===e?"bg-blue-600 hover:bg-blue-700 text-white":"border-blue-300 dark:border-blue-700 hover:bg-blue-50 dark:hover:bg-blue-900"}`,children:e},s))}),(0,r.jsx)(d.p,{...C(`questionItems.${t}.answer`),placeholder:"Your response or select an option above...",className:"w-full"})]}):"DATE"===e.type?(0,r.jsx)("div",{className:"space-y-2",children:(0,r.jsx)(d.p,{type:"date",...C(`questionItems.${t}.answer`),className:"w-full"})}):"TIME"===e.type?(0,r.jsx)("div",{className:"space-y-2",children:(0,r.jsx)(d.p,{type:"time",...C(`questionItems.${t}.answer`),className:"w-full"})}):"NUMBER"===e.type?(0,r.jsx)("div",{className:"space-y-2",children:(0,r.jsx)(d.p,{type:"number",...C(`questionItems.${t}.answer`),className:"w-full"})}):(0,r.jsx)(d.p,{...C(`questionItems.${t}.answer`),placeholder:"Your response...",className:"w-full"})]},e.id)),(0,r.jsxs)("div",{className:"flex items-center justify-center gap-3 mt-6",children:[(0,r.jsx)(()=>(0,r.jsxs)(x.rI,{children:[(0,r.jsx)(x.ty,{asChild:!0,children:(0,r.jsxs)(i.$,{variant:"outline",size:"sm",className:"flex items-center gap-1",children:[(0,r.jsxs)("span",{children:["Tone: ",g]}),(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"ml-1",children:(0,r.jsx)("path",{d:"M6 9l6 6 6-6"})})]})}),(0,r.jsxs)(x.SQ,{children:[(0,r.jsx)(x.lp,{children:"Email Tone"}),(0,r.jsx)(x.mB,{}),["Professional","Casual","Friendly","Formal","Direct","Enthusiastic","Respectful"].map(e=>(0,r.jsx)(x._2,{onClick:()=>w(e),className:g===e?"bg-accent":"",children:e},e))]})]}),{}),(0,r.jsx)(i.$,{type:"submit",className:"w-1/3",disabled:e,children:e?"Generating...":"Generate Reply"})]})]})})]})}),s&&(0,r.jsx)("div",{className:"max-w-4xl w-full mx-auto",children:(0,r.jsxs)(l.Zp,{className:"w-full",children:[(0,r.jsx)(l.aR,{children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)(l.ZB,{children:"Your Reply"}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(i.$,{variant:"outline",size:"sm",onClick:()=>{j&&"loading"!==j&&(navigator.clipboard.writeText(j),f(!0),setTimeout(()=>{f(!1)},2e3))},disabled:"loading"===s,children:p?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(m,{className:"h-4 w-4 mr-2"}),"Copied"]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(u,{className:"h-4 w-4 mr-2"}),"Copy"]})}),(0,r.jsxs)(i.$,{variant:"outline",size:"sm",onClick:()=>{c(""),b([]),v(""),T({emailContent:"",questionItems:[]})},children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Start Over"]})]})]})}),(0,r.jsx)(l.Wu,{children:"loading"===s?(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center py-12",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mb-4"}),(0,r.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"Generating your reply..."}),(0,r.jsx)("p",{className:"text-sm text-gray-400 dark:text-gray-500 mt-2",children:"This may take a few moments"})]}):(0,r.jsx)("div",{className:"whitespace-pre-wrap p-4 bg-gray-50 dark:bg-gray-800 rounded-md w-full",children:j})})]})}),y.length>0&&s&&"loading"!==s&&(0,r.jsx)("div",{className:"mt-6 max-w-4xl w-full mx-auto",children:(0,r.jsxs)(l.Zp,{className:"w-full",children:[(0,r.jsxs)(l.aR,{children:[(0,r.jsx)(l.ZB,{className:"text-lg",children:"Replace Placeholders"}),(0,r.jsx)(l.BT,{children:"Fill in the values for the placeholders found in your reply."})]}),(0,r.jsx)(l.Wu,{children:(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:y.map((e,t)=>(0,r.jsxs)("div",{className:"mb-3",children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-1",children:e.text.replace("[","").replace("]","")}),(0,r.jsx)("div",{className:"flex gap-2",children:(0,r.jsx)(d.p,{value:e.replacement,onChange:e=>N(t,e.target.value),placeholder:`Replace ${e.text}`,className:"flex-1"})})]},t))})}),(0,r.jsx)(l.wL,{children:(0,r.jsx)(i.$,{onClick:()=>{let e=j;y.forEach(t=>{t.replacement&&(e=e.replace(t.text,t.replacement))}),v(e)},className:"w-full",children:"Update Reply"})})]})})]})}},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3873:e=>{"use strict";e.exports=require("path")},4493:(e,t,s)=>{"use strict";s.d(t,{BT:()=>l,Wu:()=>d,ZB:()=>o,Zp:()=>n,aR:()=>i,wL:()=>c});var r=s(687);s(3210);var a=s(4780);function n({className:e,...t}){return(0,r.jsx)("div",{"data-slot":"card",className:(0,a.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...t})}function i({className:e,...t}){return(0,r.jsx)("div",{"data-slot":"card-header",className:(0,a.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-[data-slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...t})}function o({className:e,...t}){return(0,r.jsx)("div",{"data-slot":"card-title",className:(0,a.cn)("leading-none font-semibold",e),...t})}function l({className:e,...t}){return(0,r.jsx)("div",{"data-slot":"card-description",className:(0,a.cn)("text-muted-foreground text-sm",e),...t})}function d({className:e,...t}){return(0,r.jsx)("div",{"data-slot":"card-content",className:(0,a.cn)("px-6",e),...t})}function c({className:e,...t}){return(0,r.jsx)("div",{"data-slot":"card-footer",className:(0,a.cn)("flex items-center px-6 [.border-t]:pt-6",e),...t})}},4729:(e,t,s)=>{"use strict";s.d(t,{T:()=>n});var r=s(687);s(3210);var a=s(4780);function n({className:e,...t}){return(0,r.jsx)("textarea",{"data-slot":"textarea",className:(0,a.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...t})}},7203:(e,t,s)=>{Promise.resolve().then(s.bind(s,2341))},7684:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(2907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"D:\\\\Projects\\\\MailCraft\\\\mailcraft\\\\src\\\\app\\\\breakdown\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"D:\\Projects\\MailCraft\\mailcraft\\src\\app\\breakdown\\page.tsx","default")},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},9551:e=>{"use strict";e.exports=require("url")}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[447,276,658,605,631],()=>s(1573));module.exports=r})();